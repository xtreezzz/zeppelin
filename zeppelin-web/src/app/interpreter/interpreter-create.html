<!--
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<div id="interpreterModal" class="modal fade" role="dialog"
     tabindex="-1">
  <div class="modal-dialog modal-lg">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Create new Interpreter based on {{selectedModuleSources}}</h4>
      </div>

      <div class="modal-body">
        <div>
          <div class="row interpreter">
            <div class="col-md-12">
              <div class="interpreterSettingAdd">
                <div class="form-group" style="width:200px">
                  <b>Name:</b>
                  <input id="newInterpreterSettingName" input pu-elastic-input
                         pu-elastic-input-minwidth="180px" ng-model="newInterpreterSetting.humanReadableName" />
                </div>

                <div class="form-group" style="width:200px">
                  <b>Shebang:</b>
                  <input id="newInterpreterSettingShebang" input pu-elastic-input
                         pu-elastic-input-minwidth="180px" ng-model="newInterpreterSetting.shebang" />
                </div>


                <div>
                  <h5>Option</h5>
                </div>
                <div class="row interpreter">
                  <div class="col-md-12">
                    <div class="checkbox remove-margin-top-bottom">
                  <span class="input-group" style="line-height:30px;">
                    <label>
                      <input type="checkbox" style="width:20px !important" id="idShowPermission" ng-click="togglePermissions('newInterpreter')" ng-model="newInterpreterSetting.permissions.isEnabled"/>
                       Set permission
                    </label>
                  </span>
                    </div>
                  </div>
                </div>
                <br/>

                <div class="row interpreter">
                  <div class="col-md-12">
                    <!-- permissions -->
                    <div ng-show="newInterpreterSetting.permissions.isEnabled" class="permissionsForm">
                      <div>
                        <p>
                          Enter comma separated users and groups in the fields. <br />
                          Empty field (*) implies anyone can run this interpreter.
                        </p>
                        <div>
                          <span class="owners">Owners </span>
                          <select id="newInterpreterOwners" class="form-control" multiple="multiple">
                            <option ng-repeat="owner in newInterpreterSetting.permissions.owners" selected="selected">{{owner}}</option>
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="row interpreter">
                  <div class="col-md-12">
                    <span class="input-group" style="line-height:30px;">
                      <label>
                        Set additional JVM options.
                        <input type="text" msd-elastic ng-model="newInterpreterSetting.jvmOptions" />
                      </label>
                    </span>
                  </div>
                </div>

                <div class="row interpreter">
                  <div class="col-md-12">
                    <span class="input-group" style="line-height:30px;">
                      <label>
                        Set count of concurrent tasks.
                        <input type="text" msd-elastic ng-model="newInterpreterSetting.concurrentTasks" />
                      </label>
                    </span>
                  </div>
                </div>

                <div>
                  <h5>Properties</h5>
                  <table class="table table-striped properties">
                    <tr>
                      <th style="width:25%;text-align: center; border: 1px solid black;">name</th>
                      <th style="width:25%;text-align: center; border: 1px solid black;">value</th>
                      <th style="width:50%;text-align: center; border: 1px solid black;">description</th>
                    </tr>
                    <tr ng-repeat="key in newInterpreterSetting.config.properties | sortByKey">
                      <td style="vertical-align: middle; border: 1px solid black;">{{key}}</td>
                      <td style="vertical-align: middle; border: 1px solid black;">
                        <textarea ng-if="newInterpreterSetting.config.properties[key].type === 'textarea'"
                                  msd-elastic ng-model="newInterpreterSetting.config.properties[key].currentValue"></textarea>
                        <input ng-if="newInterpreterSetting.config.properties[key].type === 'string'"
                               type="text" msd-elastic ng-model="newInterpreterSetting.config.properties[key].currentValue" />
                        <input ng-if="newInterpreterSetting.config.properties[key].type === 'number'"
                               type="text" number-widget msd-elastic ng-model="newInterpreterSetting.config.properties[key].currentValue" />
                        <input ng-if="newInterpreterSetting.config.properties[key].type === 'url'"
                               type="text" msd-elastic ng-model="newInterpreterSetting.config.properties[key].currentValue" />
                        <input ng-if="newInterpreterSetting.config.properties[key].type === 'password'"
                               type="password" msd-elastic ng-model="newInterpreterSetting.config.properties[key].currentValue" />
                        <input ng-if="newInterpreterSetting.config.properties[key].type === 'checkbox'"
                               type="checkbox" msd-elastic ng-model="newInterpreterSetting.config.properties[key].currentValue" />
                      </td>
                      <td style="vertical-align: middle; border: 1px solid black;">
                        {{newInterpreterSetting.config.properties[key].description}}
                      </td>
                    </tr>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button"
                class="btn btn-primary" ng-click="addNewInterpreterSetting()">Add
        </button>
        <button type="button" data-dismiss="modal"
                class="btn btn-default" ng-click="cancelInterpreterSetting()">Cancel
        </button>
      </div>
    </div>
  </div>
</div>
